<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guedes Fidelidade 2.0</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #000; color: #fff; scroll-behavior: smooth; }
        .animate-fadeIn { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .gold-shadow { box-shadow: 0 0 20px rgba(254, 203, 10, 0.4); }
        .hide-scroll::-webkit-scrollbar { display: none; }
    </style>
<script type="importmap">
{
  "imports": {
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "@google/genai": "https://esm.sh/@google/genai@^1.38.0",
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3"
  }
}
</script>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header id="main-header" class="bg-black border-b border-gray-900 p-4 sticky top-0 z-50">
        <div class="container mx-auto flex items-center justify-between">
            <!-- Branding (Hidden on Home) -->
            <div id="header-brand" class="flex items-center gap-3 cursor-pointer opacity-0 pointer-events-none transition-all duration-300" onclick="app.setRole('GUEST')">
                <div class="bg-[#fecb0a] p-1.5 rounded-lg text-black">
                    <i data-lucide="car" class="w-6 h-6"></i>
                </div>
                <div class="flex flex-col">
                    <h1 class="text-sm font-black tracking-tighter leading-none">GUEDES LAVA JATO</h1>
                    <span class="text-[8px] text-gray-500 uppercase tracking-widest font-bold">Estética Automotiva</span>
                </div>
            </div>

            <!-- Actions -->
            <div class="flex items-center gap-2">
                <div id="guest-actions" class="flex gap-2">
                    <button onclick="app.setRole('GUEST')" class="flex items-center gap-2 bg-[#fecb0a] text-black px-4 py-2 rounded-full font-bold text-xs hover:opacity-90 transition-all">
                        <i data-lucide="user" class="w-4 h-4"></i> CLIENTE
                    </button>
                    <button onclick="ui.toggleModal('manager-login-modal', true)" class="flex items-center gap-2 bg-gray-900 text-gray-400 px-4 py-2 rounded-full font-bold text-xs border border-gray-800 hover:bg-gray-800 transition-all">
                        <i data-lucide="shield-check" class="w-4 h-4"></i> GESTOR
                    </button>
                </div>
                <div id="auth-actions" class="hidden flex items-center gap-3">
                    <span id="role-indicator" class="text-[10px] text-[#fecb0a] font-bold uppercase tracking-widest bg-[#fecb0a]/10 px-3 py-1 rounded-full"></span>
                    <button onclick="app.logout()" class="p-2 text-red-500 hover:bg-red-500/10 rounded-full transition-all">
                        <i data-lucide="log-out" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="app-content" class="flex-grow container mx-auto px-4 py-8">
        <!-- Rendered by JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-black border-t border-gray-900 py-8 text-gray-500">
        <div class="container mx-auto px-4 text-center space-y-4">
            <p class="text-[10px] font-bold uppercase tracking-[0.2em]">Rua Batista Carneiro, 113 - Salgado Filho – BH/MG</p>
            <a href="https://wa.me/5531982077291" target="_blank" class="inline-flex items-center gap-3 bg-green-600/10 border border-green-600/20 px-6 py-3 rounded-full hover:bg-green-600/20 transition-all group">
                <i data-lucide="message-circle" class="w-5 h-5 text-green-500 group-hover:scale-110 transition-transform"></i>
                <div class="text-left">
                    <p class="text-[8px] uppercase font-bold text-gray-600">Agende seu serviço</p>
                    <p class="text-white font-bold text-sm">(31) 98207-7291</p>
                </div>
            </a>
            <p class="text-[9px] pt-4">© 2024 GUEDES FIDELIDADE DIGITAL • Seu brilho é nossa missão.</p>
        </div>
    </footer>

    <!-- MODAL: Manager Login -->
    <div id="manager-login-modal" class="fixed inset-0 bg-black/95 z-[100] hidden items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#111] border border-gray-800 w-full max-w-md rounded-3xl p-8 shadow-2xl space-y-6">
            <div class="flex justify-between items-center">
                <h2 class="text-xl font-black uppercase tracking-tighter">Acesso Gestor</h2>
                <button onclick="ui.toggleModal('manager-login-modal', false)" class="text-gray-500 hover:text-white"><i data-lucide="x"></i></button>
            </div>
            <div class="space-y-4">
                <input type="password" id="manager-password" placeholder="Senha do Sistema" class="w-full bg-black border border-gray-800 rounded-2xl p-4 font-bold outline-none focus:border-[#fecb0a] transition-all">
                <button onclick="app.loginManager()" class="w-full bg-[#fecb0a] text-black py-4 rounded-2xl font-black uppercase tracking-tighter hover:bg-[#eec00a]">Entrar</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Add/Edit Customer -->
    <div id="customer-modal" class="fixed inset-0 bg-black/95 z-[100] hidden items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#111] border border-gray-800 w-full max-w-2xl rounded-3xl p-8 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 id="customer-modal-title" class="text-2xl font-black uppercase tracking-tighter">Novo Cliente</h2>
                <button onclick="ui.toggleModal('customer-modal', false)" class="text-gray-500 hover:text-white"><i data-lucide="x"></i></button>
            </div>
            <form id="customer-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="hidden" id="edit-customer-id">
                <div class="space-y-1">
                    <label class="text-[10px] font-bold text-gray-600 uppercase tracking-widest ml-1">Nome</label>
                    <input required id="c-name" class="w-full bg-black border border-gray-800 p-3 rounded-xl focus:border-[#fecb0a] outline-none">
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-bold text-gray-600 uppercase tracking-widest ml-1">WhatsApp</label>
                    <input required id="c-whatsapp" class="w-full bg-black border border-gray-800 p-3 rounded-xl focus:border-[#fecb0a] outline-none">
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-bold text-gray-600 uppercase tracking-widest ml-1">Modelo Carro</label>
                    <input required id="c-vehicle" class="w-full bg-black border border-gray-800 p-3 rounded-xl focus:border-[#fecb0a] outline-none">
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-bold text-gray-600 uppercase tracking-widest ml-1">Placa</label>
                    <input required id="c-plate" class="w-full bg-black border border-gray-800 p-3 rounded-xl focus:border-[#fecb0a] outline-none uppercase font-bold">
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-bold text-gray-600 uppercase tracking-widest ml-1">Nascimento</label>
                    <input type="date" id="c-birth" class="w-full bg-black border border-gray-800 p-3 rounded-xl focus:border-[#fecb0a] outline-none">
                </div>
                <div class="space-y-1">
                    <label class="text-[10px] font-bold text-gray-600 uppercase tracking-widest ml-1">Time</label>
                    <input id="c-team" class="w-full bg-black border border-gray-800 p-3 rounded-xl focus:border-[#fecb0a] outline-none">
                </div>
                <button type="submit" class="md:col-span-2 bg-[#fecb0a] text-black py-4 rounded-2xl font-black uppercase tracking-tighter mt-4">Salvar Cadastro</button>
            </form>
        </div>
    </div>

    <!-- MODAL: Add Service -->
    <div id="service-modal" class="fixed inset-0 bg-black/95 z-[100] hidden items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-[#111] border border-gray-800 w-full max-w-md rounded-3xl p-8 space-y-6">
            <h2 class="text-xl font-black uppercase tracking-tighter">Lançar Selo</h2>
            <div id="service-target-info" class="p-4 bg-black rounded-2xl border border-gray-900 flex items-center gap-3">
                <i data-lucide="user" class="text-[#fecb0a]"></i>
                <span id="service-customer-name" class="font-bold text-sm"></span>
            </div>
            <div class="space-y-4">
                <select id="service-type" class="w-full bg-black border border-gray-800 p-4 rounded-2xl outline-none focus:border-[#fecb0a]">
                    <option>Lavagem Simples</option>
                    <option>Geral Completa</option>
                    <option>Polimento</option>
                    <option>Martelinho de Ouro</option>
                    <option>Higienização Interna</option>
                    <option>Cristalização</option>
                </select>
                <input type="number" id="service-price" placeholder="Valor Pago (R$)" class="w-full bg-black border border-gray-800 p-4 rounded-2xl outline-none focus:border-[#fecb0a] font-bold">
                <button onclick="app.confirmService()" class="w-full bg-[#fecb0a] text-black py-4 rounded-2xl font-black uppercase tracking-tighter">Confirmar Selo</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script type="module">
        import { GoogleGenAI } from "@google/genai";

        // APP STATE
        window.app = {
            role: 'GUEST', // GUEST, CUSTOMER, MANAGER
            customers: JSON.parse(localStorage.getItem('guedes_data') || '[]'),
            currentCustomer: null,
            
            init() {
                this.render();
                lucide.createIcons();
            },

            save() {
                localStorage.setItem('guedes_data', JSON.stringify(this.customers));
            },

            setRole(role, data = null) {
                this.role = role;
                this.currentCustomer = data;
                this.render();
                window.scrollTo(0, 0);
            },

            loginCustomer(idOrPlate) {
                const found = this.customers.find(c => 
                    c.plate.toUpperCase() === idOrPlate.toUpperCase() || 
                    c.whatsapp.replace(/\D/g,'') === idOrPlate.replace(/\D/g,'')
                );
                if (found) {
                    this.setRole('CUSTOMER', found);
                } else {
                    alert("Cliente não encontrado.");
                }
            },

            loginManager() {
                const pass = document.getElementById('manager-password').value;
                if (pass === 'FideliGuedes26#') {
                    ui.toggleModal('manager-login-modal', false);
                    this.setRole('MANAGER');
                } else {
                    alert("Senha incorreta.");
                }
            },

            logout() {
                this.setRole('GUEST');
            },

            // MANAGER ACTIONS
            deleteCustomer(id) {
                if(confirm("Excluir este cliente permanentemente?")) {
                    this.customers = this.customers.filter(c => c.id !== id);
                    this.save();
                    this.render();
                }
            },

            openServiceModal(customerId) {
                const c = this.customers.find(x => x.id === customerId);
                this.selectedCustomerId = customerId;
                document.getElementById('service-customer-name').innerText = c.name;
                ui.toggleModal('service-modal', true);
            },

            confirmService() {
                const c = this.customers.find(x => x.id === this.selectedCustomerId);
                const type = document.getElementById('service-type').value;
                const price = document.getElementById('service-price').value;
                
                const service = {
                    id: Date.now(),
                    type,
                    price: Number(price),
                    date: new Date().toISOString()
                };

                c.services.push(service);
                c.totalServicesCount = (c.totalServicesCount || 0) + 1;
                c.stamps = (c.stamps || 0) + 1;
                if (c.stamps > 10) c.stamps = 1; // Restart cycle

                this.save();
                ui.toggleModal('service-modal', false);
                this.render();
            },

            redeemPrize(customerId) {
                if(confirm("Confirmar resgate de prêmio (Geral Completa)?")) {
                    const c = this.customers.find(x => x.id === customerId);
                    c.stamps = 0;
                    this.save();
                    this.render();
                }
            },

            exportBackup() {
                const blob = new Blob([JSON.stringify(this.customers)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `guedes_backup_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
            },

            importBackup(input) {
                const file = input.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (confirm("Isso apagará os dados atuais. Confirmar?")) {
                                this.customers = data;
                                this.save();
                                this.render();
                            }
                        } catch(err) { alert("Arquivo inválido."); }
                    };
                    reader.readAsText(file);
                }
            },

            // RENDER LOGIC
            render() {
                const content = document.getElementById('app-content');
                const brand = document.getElementById('header-brand');
                const guestActions = document.getElementById('guest-actions');
                const authActions = document.getElementById('auth-actions');
                const roleInd = document.getElementById('role-indicator');

                // Header Visibility
                if (this.role === 'GUEST') {
                    brand.classList.add('opacity-0', 'pointer-events-none');
                    guestActions.classList.remove('hidden');
                    authActions.classList.add('hidden');
                } else {
                    brand.classList.remove('opacity-0', 'pointer-events-none');
                    guestActions.classList.add('hidden');
                    authActions.classList.remove('hidden');
                    roleInd.innerText = this.role === 'MANAGER' ? 'Gestor' : 'Fidelidade';
                }

                // Main Views
                if (this.role === 'GUEST') {
                    content.innerHTML = ui.views.home();
                } else if (this.role === 'CUSTOMER') {
                    content.innerHTML = ui.views.customer(this.currentCustomer);
                } else if (this.role === 'MANAGER') {
                    content.innerHTML = ui.views.manager(this.customers);
                }

                lucide.createIcons();
                ui.attachListeners();
            }
        };

        // UI COMPONENTS & VIELS
        window.ui = {
            toggleModal(id, show) {
                const m = document.getElementById(id);
                if (show) {
                    m.classList.remove('hidden');
                    m.classList.add('flex');
                } else {
                    m.classList.add('hidden');
                    m.classList.remove('flex');
                }
            },

            attachListeners() {
                const loginForm = document.getElementById('login-form');
                if (loginForm) {
                    loginForm.onsubmit = (e) => {
                        e.preventDefault();
                        app.loginCustomer(document.getElementById('login-input').value);
                    };
                }

                const cForm = document.getElementById('customer-form');
                if (cForm) {
                    cForm.onsubmit = (e) => {
                        e.preventDefault();
                        const id = document.getElementById('edit-customer-id').value;
                        const newC = {
                            id: id || Date.now().toString(),
                            name: document.getElementById('c-name').value,
                            whatsapp: document.getElementById('c-whatsapp').value,
                            vehicleModel: document.getElementById('c-vehicle').value,
                            plate: document.getElementById('c-plate').value.toUpperCase(),
                            birthDate: document.getElementById('c-birth').value,
                            favoriteTeam: document.getElementById('c-team').value,
                            services: id ? app.customers.find(x => x.id === id).services : [],
                            stamps: id ? app.customers.find(x => x.id === id).stamps : 0,
                            totalServicesCount: id ? app.customers.find(x => x.id === id).totalServicesCount : 0
                        };
                        if (id) {
                            app.customers = app.customers.map(x => x.id === id ? newC : x);
                        } else {
                            app.customers.push(newC);
                        }
                        app.save();
                        ui.toggleModal('customer-modal', false);
                        app.render();
                    };
                }
            },

            views: {
                home() {
                    return `
                    <div class="max-w-xl mx-auto space-y-12 py-12 animate-fadeIn">
                        <div class="text-center space-y-4">
                            <h2 class="text-5xl font-black tracking-tighter uppercase italic">Guedes Fidelidade</h2>
                            <p class="text-gray-500 font-bold uppercase tracking-[0.3em] text-[10px]">Acompanhe seu brilho exclusivo</p>
                        </div>
                        <div class="bg-[#111] p-10 rounded-[2.5rem] border border-gray-900 shadow-2xl space-y-8">
                            <form id="login-form" class="space-y-6">
                                <div class="space-y-2">
                                    <label class="text-[10px] font-black text-gray-700 uppercase tracking-widest ml-1">Placa ou WhatsApp</label>
                                    <div class="relative">
                                        <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-700 w-6 h-6"></i>
                                        <input id="login-input" placeholder="Ex: QPS-8964" class="w-full bg-black border-2 border-gray-900 rounded-3xl py-5 pl-14 pr-4 text-xl font-black tracking-widest focus:border-[#fecb0a] outline-none transition-all placeholder:text-gray-900">
                                    </div>
                                </div>
                                <button type="submit" class="w-full bg-[#fecb0a] text-black py-5 rounded-3xl font-black text-lg hover:scale-[1.02] active:scale-95 transition-all shadow-xl uppercase italic tracking-tighter">Acessar Cartão</button>
                            </form>
                        </div>
                        <div class="bg-[#111] p-6 rounded-[2rem] border border-gray-900 flex items-center gap-6">
                            <div class="bg-[#fecb0a]/10 p-4 rounded-2xl text-[#fecb0a]"><i data-lucide="award" class="w-8 h-8"></i></div>
                            <div>
                                <h3 class="font-black text-[#fecb0a] uppercase tracking-tighter text-sm">Premiação GOLD</h3>
                                <p class="text-[11px] text-gray-500 leading-relaxed font-medium">A cada 10 serviços você ganha uma <strong class="text-white">Geral Completa</strong>. O carinho que seu carro merece.</p>
                            </div>
                        </div>
                    </div>`;
                },

                customer(c) {
                    const isGold = c.stamps === 10;
                    return `
                    <div class="max-w-4xl mx-auto space-y-8 animate-fadeIn">
                        ${isGold ? `
                        <div class="bg-gradient-to-r from-[#fecb0a] to-[#ff9900] p-6 rounded-[2rem] flex flex-col md:flex-row items-center gap-6 shadow-2xl gold-shadow animate-pulse border-2 border-white/20">
                            <i data-lucide="trophy" class="w-12 h-12 text-black"></i>
                            <div class="text-center md:text-left flex-grow">
                                <h4 class="font-black text-black text-2xl uppercase tracking-tighter">SELO GOLD ATIVO!</h4>
                                <p class="text-black/80 font-bold text-xs uppercase tracking-wide">Parabéns! Sua Geral Completa está disponível para resgate.</p>
                            </div>
                        </div>` : ''}

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-[#111] p-6 rounded-[2rem] border border-gray-900 flex items-center gap-5">
                                <div class="bg-[#fecb0a]/10 p-3 rounded-2xl text-[#fecb0a]"><i data-lucide="user"></i></div>
                                <div><p class="text-[9px] font-black text-gray-700 uppercase tracking-widest">Dono</p><h3 class="text-xl font-black">${c.name}</h3></div>
                            </div>
                            <div class="bg-[#111] p-6 rounded-[2rem] border border-gray-900 flex items-center gap-5">
                                <div class="bg-gray-900 p-3 rounded-2xl text-gray-600"><i data-lucide="car"></i></div>
                                <div><p class="text-[9px] font-black text-gray-700 uppercase tracking-widest">Carro</p><h3 class="text-xl font-black">${c.plate} <span class="text-xs text-gray-600 font-bold">/ ${c.vehicleModel}</span></h3></div>
                            </div>
                        </div>

                        <div class="bg-[#111] p-8 rounded-[2.5rem] border border-gray-900 space-y-8 shadow-xl relative overflow-hidden">
                            <div class="flex justify-between items-end">
                                <h2 class="text-2xl font-black uppercase tracking-tighter">Seu Progresso</h2>
                                <span class="text-[10px] font-black text-gray-700 uppercase tracking-[0.2em]">${c.stamps}/10</span>
                            </div>
                            <div class="grid grid-cols-5 gap-3 sm:gap-6">
                                ${Array.from({length: 10}).map((_, i) => {
                                    const active = i < c.stamps;
                                    const gold = i === 9;
                                    return `
                                    <div class="aspect-square rounded-2xl border-2 flex items-center justify-center transition-all ${active ? (gold ? 'bg-gradient-to-br from-[#fecb0a] to-[#ff9900] border-white text-black scale-110' : 'bg-[#fecb0a] border-white text-black scale-105') : 'bg-black border-gray-900 text-gray-800'}">
                                        ${active ? `<i data-lucide="${gold ? 'trophy' : 'check-circle'}" class="w-6 h-6"></i>` : `<span class="font-black text-sm">${i+1}</span>`}
                                    </div>`;
                                }).join('')}
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-2 bg-[#111] p-8 rounded-[2rem] border border-gray-900 space-y-6">
                                <h3 class="text-lg font-black uppercase tracking-tighter flex justify-between">Histórico <span class="text-[10px] text-gray-700">${c.totalServicesCount || 0} Total</span></h3>
                                <div class="space-y-3">
                                    ${c.services.slice().reverse().map(s => `
                                        <div class="flex items-center justify-between p-4 bg-black border border-gray-900 rounded-2xl">
                                            <div class="flex items-center gap-4">
                                                <div class="bg-gray-900 p-2 rounded-xl text-gray-600"><i data-lucide="calendar" class="w-4 h-4"></i></div>
                                                <div><p class="text-sm font-bold">${s.type}</p><p class="text-[9px] text-gray-700">${new Date(s.date).toLocaleDateString()}</p></div>
                                            </div>
                                            <p class="text-[#fecb0a] font-black">R$ ${s.price.toFixed(2)}</p>
                                        </div>
                                    `).join('') || '<p class="text-gray-800 text-center py-10 italic">Nenhum serviço ainda.</p>'}
                                </div>
                            </div>
                            <div class="space-y-6">
                                <div class="bg-black border border-gray-900 p-6 rounded-[2rem] space-y-2">
                                    <p class="text-[9px] font-black text-red-500 uppercase tracking-widest flex items-center gap-2"><i data-lucide="heart" class="w-3 h-3 fill-red-500"></i> Time</p>
                                    <p class="text-xl font-black italic uppercase">${c.favoriteTeam || '---'}</p>
                                </div>
                                <div id="ai-tip-container" class="bg-black border-2 border-gray-900 p-6 rounded-[2rem] space-y-4 relative overflow-hidden group">
                                    <div class="flex items-center justify-between">
                                        <h4 class="text-[9px] font-black text-[#fecb0a] uppercase tracking-widest flex items-center gap-2"><i data-lucide="sparkles" class="w-3 h-3"></i> Dica Guedes</h4>
                                    </div>
                                    <p class="text-xs text-gray-500 font-medium leading-relaxed italic">"Manter o brilho do seu carro é mais que estética, é proteção!"</p>
                                </div>
                            </div>
                        </div>
                    </div>`;
                },

                manager(customers) {
                    return `
                    <div class="space-y-8 animate-fadeIn">
                        <div class="flex flex-col lg:flex-row justify-between items-center gap-4">
                            <h2 class="text-4xl font-black uppercase tracking-tighter italic">Gestão de Dados</h2>
                            <div class="flex flex-wrap gap-2">
                                <button onclick="ui.toggleModal('customer-modal', true)" class="flex items-center gap-2 bg-[#fecb0a] text-black px-6 py-2.5 rounded-full font-black text-xs hover:opacity-90"><i data-lucide="user-plus"></i> NOVO CLIENTE</button>
                                <button onclick="app.exportBackup()" class="flex items-center gap-2 bg-gray-900 text-gray-400 border border-gray-800 px-6 py-2.5 rounded-full font-black text-xs hover:bg-gray-800"><i data-lucide="download"></i> BACKUP</button>
                                <label class="flex items-center gap-2 bg-gray-900 text-gray-400 border border-gray-800 px-6 py-2.5 rounded-full font-black text-xs hover:bg-gray-800 cursor-pointer">
                                    <i data-lucide="upload"></i> IMPORTAR
                                    <input type="file" class="hidden" onchange="app.importBackup(this)">
                                </label>
                            </div>
                        </div>

                        <div class="bg-[#111] border border-gray-900 rounded-[2rem] overflow-hidden">
                            <div class="overflow-x-auto">
                                <table class="w-full text-left">
                                    <thead class="bg-black text-[9px] font-black text-gray-700 uppercase tracking-widest">
                                        <tr>
                                            <th class="px-6 py-4">Cliente / Carro</th>
                                            <th class="px-6 py-4">Status</th>
                                            <th class="px-6 py-4 text-center">Selos</th>
                                            <th class="px-6 py-4 text-right">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-900">
                                        ${customers.map(c => `
                                        <tr class="hover:bg-white/[0.02] transition-colors group">
                                            <td class="px-6 py-5">
                                                <div class="flex items-center gap-3">
                                                    ${c.stamps === 10 ? '<i data-lucide="gift" class="text-[#fecb0a] w-5 h-5"></i>' : '<i data-lucide="user" class="text-gray-800 w-5 h-5"></i>'}
                                                    <div><p class="font-bold text-sm">${c.name}</p><p class="text-[10px] text-[#fecb0a] font-black">${c.plate}</p></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-5 text-[10px] font-bold text-gray-600 uppercase">
                                                ${c.totalServicesCount || 0} Serviços
                                            </td>
                                            <td class="px-6 py-5">
                                                <div class="flex justify-center gap-1">
                                                    ${Array.from({length: 10}).map((_, i) => `
                                                        <div class="w-1.5 h-1.5 rounded-full ${i < c.stamps ? 'bg-[#fecb0a]' : 'bg-gray-800'}"></div>
                                                    `).join('')}
                                                </div>
                                            </td>
                                            <td class="px-6 py-5 text-right">
                                                <div class="flex justify-end gap-1 opacity-20 group-hover:opacity-100 transition-all">
                                                    ${c.stamps === 10 ? `
                                                        <button onclick="app.redeemPrize('${c.id}')" class="p-2 bg-[#fecb0a]/20 text-[#fecb0a] rounded-lg hover:bg-[#fecb0a]/30"><i data-lucide="gift" class="w-4 h-4"></i></button>
                                                    ` : `
                                                        <button onclick="app.openServiceModal('${c.id}')" class="p-2 bg-green-500/10 text-green-500 rounded-lg hover:bg-green-500/20"><i data-lucide="plus" class="w-4 h-4"></i></button>
                                                    `}
                                                    <button onclick="app.deleteCustomer('${c.id}')" class="p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                                                </div>
                                            </td>
                                        </tr>`).join('') || '<tr><td colspan="4" class="p-12 text-center text-gray-800 italic">Nenhum cliente cadastrado.</td></tr>'}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>`;
                }
            }
        };

        // INITIALIZE
        app.init();
    </script>
</body>
</html>
